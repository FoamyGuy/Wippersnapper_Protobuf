syntax = "proto3";

package signal.v1;

// Device command API 
import "semver/v1/semver.proto";

// Device pin API
import "pin/v1/pin.proto";
import "pwm/v1/pwm.proto";

/* Signal Message */
message Signal {
    /* BlinkaConnect command type */
    enum CmdType {
      CMD_TYPE_UNSPECIFIED  = 0; // Unspecified/invalid command name
      CMD_TYPE_GET          = 1; // Gets data from a device OR IO
      CMD_TYPE_SET          = 2; // Sets data to a device OR IO
    }

    /* BlinkaConnect command types */
    enum CmdName {
      CMD_NAME_UNSPECIFIED        = 0; // Unspecified/invalid command name
      CMD_NAME_VERSION            = 1; // BlinkaConnect version
      CMD_NAME_LOCATION           = 2; // Device location
      CMD_NAME_BATTERY            = 3; // Device battery level
      CMD_NAME_LIST_PINS_ANALOG   = 4; // List all analog pins
      CMD_NAME_LIST_PINS_DIGITAL  = 5; // List all digital pins
      CMD_NAME_PIN_VALUE          = 6; // Digital or analog pin value
      CMD_NAME_PIN_MODE           = 7; // Digital or analog pin mode
      CMD_NAME_PWM_OUTPUT         = 8; // Output PWM on a provided pin
      // TODO: Add more commands here
    }

    /* Standard command message */
    message Command {
      CmdType type               = 1; // Command type
      CmdName name               = 2; // Command name
      pin.v1.Pin pin             = 3; // Pin-specific command parameters
      semver.v1.Version version  = 4; // Library version metadata
      pwm.v1.PWM pwm             = 5; // Library version metadata
    }
    Command command = 1;
}