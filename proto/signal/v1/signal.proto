syntax = "proto3";

package signal.v1;

/* Signal is a device command or response
   transmitted by an Adafruit IO feed.
   Feed name: devices/ID/signals 
*/
message Signal {

    /* BlinkaConnect command directions */
    enum CommandDirection {
      COMMAND_DIRECTION_UNSPECIFIED = 0; // Unspecified/invalid command name
      COMMAND_DIRECTION_GET         = 1; // Get data
      COMMAND_DIRECTION_SET         = 2; // Sets data
    }

    /* BlinkaConnect command types */
    enum CommandType {
      COMMAND_TYPE_UNSPECIFIED  = 0; // Unspecified/invalid command name
      COMMAND_TYPE_VERSION      = 1; // BlinkaConnect version
      COMMAND_TYPE_LOCATION     = 2; // Device location
      COMMAND_TYPE_BATTERY      = 3; // Device battery level
      COMMAND_TYPE_PIN_MAP      = 4; // Map of all pins
      COMMAND_TYPE_PIN_STATE    = 5; // Map of all pin states
      COMMAND_TYPE_PIN_MODE     = 6; // Pin mode
      // TODO! Add more here!
    }

    /* Command message format */
    message Command {
      CommandDirection direction = 1;
      CommandType type           = 2;
      int64 pin                  = 3; // pin number
      // TODO: the pin implementation needs work
      // specifically how do you define between an
      // analog and digital pin
      // would we want multiple command types??
      // i,.e: command WritePins
      // commandReadPin, commandI2c
      string value               = 3;
    }
    Command commands = 1; // One command per signal
}